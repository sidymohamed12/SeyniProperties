<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contrat {{ contract.numero_contrat }} - Impression</title>
    <style>
        @media print {
            @page {
                margin: 1cm;
                size: A4;
            }
            
            body {
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }
            
            .no-print {
                display: none !important;
            }
            
            .page-break {
                page-break-before: always;
            }
        }
        
        body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            line-height: 1.4;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #2563eb;
            padding-bottom: 20px;
        }
        
        .header h1 {
            color: #2563eb;
            font-size: 24px;
            margin: 0;
        }
        
        .header .contract-number {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .section {
            margin-bottom: 25px;
        }
        
        .section-title {
            background-color: #2563eb;
            color: white;
            padding: 8px 15px;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        
        .info-table td {
            padding: 8px 12px;
            border: 1px solid #ddd;
        }
        
        .info-table .label {
            background-color: #f8fafc;
            font-weight: bold;
            width: 30%;
        }
        
        .financial-summary {
            background-color: #f0f9ff;
            border: 2px solid #2563eb;
            padding: 15px;
            border-radius: 5px;
        }
        
        .financial-summary .total {
            font-size: 16px;
            font-weight: bold;
            color: #2563eb;
            text-align: center;
            margin-top: 10px;
        }
        
        .conditions {
            background-color: #fefce8;
            border-left: 4px solid #eab308;
            padding: 15px;
            margin: 20px 0;
        }
        
        .signatures {
            margin-top: 40px;
        }
        
        .signature-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .signature-table td {
            border: 1px solid #333;
            padding: 40px 10px;
            text-align: center;
            vertical-align: bottom;
        }
        
        .signature-table .header-cell {
            background-color: #f1f5f9;
            font-weight: bold;
            padding: 10px;
        }
        
        .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 10px;
            color: #666;
            border-top: 1px solid #ddd;
            padding-top: 15px;
        }
        
        .print-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .print-button:hover {
            background-color: #1d4ed8;
        }
    </style>
</head>
<body>
    <button onclick="window.print()" class="print-button no-print">
        üñ®Ô∏è Imprimer
    </button>
    
    <div class="header">
        <h1>CONTRAT DE LOCATION</h1>
        <div class="contract-number">N¬∞ {{ contract.numero_contrat }}</div>
    </div>

    <!-- Informations g√©n√©rales -->
    <div class="section">
        <div class="section-title">INFORMATIONS G√âN√âRALES</div>
        <table class="info-table">
            <tr>
                <td class="label">Num√©ro de contrat</td>
                <td>{{ contract.numero_contrat }}</td>
            </tr>
            <tr>
                <td class="label">P√©riode de location</td>
                <td>Du {{ contract.date_debut|date:"d/m/Y" }} au {{ contract.date_fin|date:"d/m/Y" }}</td>
            </tr>
            <tr>
                <td class="label">Dur√©e</td>
                <td>{{ contract.duree_mois }} mois</td>
            </tr>
            <tr>
                <td class="label">Statut</td>
                <td>{{ contract.get_statut_display|upper }}</td>
            </tr>
        </table>
    </div>

    <!-- Bien immobilier -->
    <div class="section">
        <div class="section-title">BIEN IMMOBILIER</div>
        <table class="info-table">
            <tr>
                <td class="label">R√©sidence</td>
                <td>{{ contract.appartement.residence.nom }}</td>
            </tr>
            <tr>
                <td class="label">Appartement</td>
                <td>{{ contract.appartement.nom }}</td>
            </tr>
            <tr>
                <td class="label">Type de bien</td>
                <td>{{ contract.appartement.get_type_bien_display }}</td>
            </tr>
            <tr>
                <td class="label">Superficie</td>
                <td>{{ contract.appartement.superficie }} m¬≤</td>
            </tr>
            <tr>
                <td class="label">Nombre de pi√®ces</td>
                <td>{{ contract.appartement.nb_pieces }}</td>
            </tr>
            <tr>
                <td class="label">Adresse</td>
                <td>{{ contract.appartement.residence.adresse }}</td>
            </tr>
            <tr>
                <td class="label">Ville</td>
                <td>{{ contract.appartement.residence.ville }}</td>
            </tr>
        </table>
    </div>
    
    <!-- Locataire -->
    <div class="section">
        <div class="section-title">LOCATAIRE</div>
        <table class="info-table">
            <tr>
                <td class="label">Nom complet</td>
                <td>{{ contract.locataire.nom_complet }}</td>
            </tr>
            <tr>
                <td class="label">Email</td>
                <td>{{ contract.locataire.email }}</td>
            </tr>
            {% if contract.locataire.telephone %}
            <tr>
                <td class="label">T√©l√©phone</td>
                <td>{{ contract.locataire.telephone }}</td>
            </tr>
            {% endif %}
        </table>
    </div>
    
    <!-- Propri√©taire -->
    <div class="section">
        <div class="section-title">PROPRI√âTAIRE (BAILLEUR)</div>
        <table class="info-table">
            <tr>
                <td class="label">Nom complet</td>
                <td>{{ contract.appartement.residence.proprietaire.nom_complet }}</td>
            </tr>
            <tr>
                <td class="label">Email</td>
                <td>{{ contract.appartement.residence.proprietaire.email }}</td>
            </tr>
            {% if contract.appartement.residence.proprietaire.telephone %}
            <tr>
                <td class="label">T√©l√©phone</td>
                <td>{{ contract.appartement.residence.proprietaire.telephone }}</td>
            </tr>
            {% endif %}
            {% if contract.appartement.residence.proprietaire.adresse %}
            <tr>
                <td class="label">Adresse</td>
                <td>{{ contract.appartement.residence.proprietaire.adresse }}</td>
            </tr>
            {% endif %}
            <tr>
                <td class="label">Type de tiers</td>
                <td>{{ contract.appartement.residence.proprietaire.get_type_tiers_display|upper }}</td>
            </tr>
            {% if contract.appartement.residence.proprietaire.raison_sociale %}
            <tr>
                <td class="label">Raison sociale</td>
                <td>{{ contract.appartement.residence.proprietaire.raison_sociale }}</td>
            </tr>
            {% endif %}
            {% if contract.appartement.residence.proprietaire.numero_identification %}
            <tr>
                <td class="label">Num√©ro d'identification</td>
                <td>{{ contract.appartement.residence.proprietaire.numero_identification }}</td>
            </tr>
            {% endif %}
        </table>
    </div>
    
    <!-- Conditions financi√®res -->
    <div class="section">
        <div class="section-title">CONDITIONS FINANCI√àRES</div>
        <div class="financial-summary">
            <table class="info-table">
                <tr>
                    <td class="label">Loyer mensuel</td>
                    <td>{{ contract.loyer_mensuel|floatformat:0 }} FCFA</td>
                </tr>
                {% if contract.charges_mensuelles %}
                <tr>
                    <td class="label">Charges mensuelles</td>
                    <td>{{ contract.charges_mensuelles|floatformat:0 }} FCFA</td>
                </tr>
                {% endif %}
                {% if contract.depot_garantie %}
                <tr>
                    <td class="label">D√©p√¥t de garantie</td>
                    <td>{{ contract.depot_garantie|floatformat:0 }} FCFA</td>
                </tr>
                {% endif %}
                {% if contract.frais_agence %}
                <tr>
                    <td class="label">Frais d'agence</td>
                    <td>{{ contract.frais_agence|floatformat:0 }} FCFA</td>
                </tr>
                {% endif %}
            </table>

            <div class="total">
                MONTANT MENSUEL TOTAL : {{ contract.montant_total_mensuel|floatformat:0 }} FCFA
            </div>
        </div>
    </div>
    
    <!-- Conditions particuli√®res -->
    {% if contract.conditions_particulieres %}
    <div class="section">
        <div class="section-title">CONDITIONS PARTICULI√àRES</div>
        <div class="conditions">
            {{ contract.conditions_particulieres|linebreaks }}
        </div>
    </div>
    {% endif %}
    
    <!-- Signatures -->
    <div class="section signatures">
        <div class="section-title">SIGNATURES</div>
        <table class="signature-table">
            <tr>
                <td class="header-cell" width="25%">Date</td>
                <td class="header-cell" width="25%">Le Locataire</td>
                <td class="header-cell" width="25%">Le proprietaire</td>
                <td class="header-cell" width="25%">L'Agence</td>
            </tr>
            <tr>
                <td>{{ contract.date_debut|date:"d/m/Y"|default:"___/___/______" }}</td>
                <td style="height: 80px;"></td>
                <td style="height: 80px;"></td>
                <td style="height: 80px;"></td>
            </tr>
            <tr>
                <td class="header-cell">Nom</td>
                <td>{{ contract.locataire.nom_complet }}</td>
                <td>{{ contract.appartement.residence.proprietaire.nom_complet }}</td>
                <td>Seyni Properties</td>
            </tr>
        </table>
    </div>
    
    <!-- Clauses l√©gales -->
    <div class="section">
        <div class="section-title">CLAUSES L√âGALES</div>
        <div style="font-size: 10px; line-height: 1.3;">
            <p><strong>Article 1 - Objet du contrat :</strong> Le pr√©sent contrat a pour objet la location du logement d√©crit ci-dessus.</p>
            
            <p><strong>Article 2 - Dur√©e :</strong> Le pr√©sent bail est consenti pour une dur√©e de {{ contract.duree_mois }} mois, soit du {{ contract.date_debut|date:"d/m/Y" }} au {{ contract.date_fin|date:"d/m/Y" }}.</p>
            
            <p><strong>Article 3 - Loyer :</strong> Le loyer mensuel est fix√© √† {{ contract.loyer_mensuel|floatformat:0 }} FCFA, payable d'avance le 1er de chaque mois.</p>
            
            {% if contract.depot_garantie %}
            <p><strong>Article 4 - D√©p√¥t de garantie :</strong> Un d√©p√¥t de garantie de {{ contract.depot_garantie|floatformat:0 }} FCFA a √©t√© vers√© par le locataire.</p>
            {% endif %}
            
            <p><strong>Article 5 - Obligations du locataire :</strong> Le locataire s'engage √† :</p>
            <ul style="margin: 5px 0; padding-left: 20px;">
                <li>Payer le loyer aux √©ch√©ances convenues</li>
                <li>Occuper personnellement les lieux</li>
                <li>Entretenir le logement en bon √©tat</li>
                <li>Ne pas transformer les lieux sans autorisation √©crite</li>
                <li>Permettre les visites pour vente ou relocation avec pr√©avis de 24h</li>
            </ul>
            
            <p><strong>Article 6 - Obligations du proprietaire :</strong> Le proprietaire s'engage √† :</p>
            <ul style="margin: 5px 0; padding-left: 20px;">
                <li>D√©livrer le logement en bon √©tat d'usage</li>
                <li>Assurer la jouissance paisible des lieux</li>
                <li>Effectuer les r√©parations autres que locatives</li>
            </ul>
            
            {% if contract.preavis_mois %}
            <p><strong>Article 7 - R√©siliation :</strong> Chaque partie peut r√©silier le bail en respectant un pr√©avis de {{ contract.preavis_mois }} mois.</p>
            {% endif %}
            
            <p><strong>Article 8 - Juridiction :</strong> En cas de litige, les tribunaux de Dakar seront seuls comp√©tents.</p>
        </div>
    </div>
    
    <div class="footer">
        <p>Document g√©n√©r√© automatiquement le {{ "now"|date:"d/m/Y √† H:i" }}</p>
        <p>Seyni Properties - Gestion Immobili√®re</p>
    </div>
</body>
</html>